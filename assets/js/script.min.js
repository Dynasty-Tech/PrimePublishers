jQuery(function ($) {
    "use strict";

    function menuSticky() {
        var navHeight = $(".topper").height();
        $(window).scrollTop() > navHeight ? $("nav, .menu-toggle").addClass("sticky") : $("nav , .menu-toggle").removeClass("sticky");
    }(function () {
        var menutoggle = $(".menu-toggle");
        var offcanvasmenu = $("#offcanvas-menu");
        var closemenu = $(".close-menu");
        menutoggle.on("click", function () {
            offcanvasmenu.addClass("toggled");
            return false;
        });
        closemenu.on("click", function () {
            offcanvasmenu.removeClass("toggled");
            return false;
        });
    })();
    $(function () {
        $("a.page-scroll").on("click", function (event) {
            var $anchor = $(this);
            $("html, body").stop().animate({
                scrollTop: $($anchor.attr("href")).offset().top
            }, 1500, "easeInOutExpo");
            event.preventDefault();
        });
    });
    (function () {
        var openclose = $(".cart-wrapper");
        openclose.on("click", function () {
            return $(this).toggleClass("open");
        });
    })();
    (function () {
        var openbar = $(".open-bar");
        var searchbar = $("#search-bar");
        var closebar = $(".close-bar");
        openbar.on("click", function () {
            searchbar.addClass("active");
            return false;
        });
        closebar.on("click", function () {
            searchbar.removeClass("active");
            return false;
        });
    })();
    if ($("#accordion").length) {
        $("#accordion").accordion();
    }
    if ($("#lightBox, #lightBox-2").length) {
        $("#lightBox, #lightBox-2").poptrox({
            usePopupCaption: true,
            usePopupNav: true,
            popupPadding: 0,
        });
    }

    function funFactCounting() {
        if ($(".counting-section").length) {
            $(".counting-section").on("inview", function (event, visible, visiblePartX, visiblePartY) {
                if (visible) {
                    $(this).find(".timer").each(function () {
                        var $this = $(this);
                        $({
                            Counter: 0
                        }).animate({
                            Counter: $this.text()
                        }, {
                            duration: 2000,
                            easing: "linear",
                            step: function () {
                                $this.text(Math.ceil(this.Counter));
                            },
                        });
                    });
                    $(this).off("inview");
                }
            });
        }
    }

    function progressBar() {
        $(".progressSection").on("inview", function (event, visible, visiblePartX, visiblePartY) {
            if (visible) {
                $.each($("div.progress-bar"), function () {
                    $(this).css("width", $(this).attr("aria-valuenow") + "%");
                });
                $(this).off("inview");
            }
        });
    }
    if ($("#googleMap").length) {
        google.maps.event.addDomListener(window, "load", init);

        function init() {
            var mapOptions = {
                zoom: 14,
                scrollwheel: false,
                center: new google.maps.LatLng(41.96677, -71.186996),
                styles: [{
                    featureType: "all",
                    elementType: "labels.text.fill",
                    stylers: [{
                        saturation: 36
                    }, {
                        color: "#333333"
                    }, {
                        lightness: 40
                    }, ],
                }, {
                    featureType: "all",
                    elementType: "labels.text.stroke",
                    stylers: [{
                        visibility: "on"
                    }, {
                        color: "#ffffff"
                    }, {
                        lightness: 16
                    }, ],
                }, {
                    featureType: "all",
                    elementType: "labels.icon",
                    stylers: [{
                        visibility: "off"
                    }],
                }, {
                    featureType: "administrative",
                    elementType: "geometry.fill",
                    stylers: [{
                        color: "#fefefe"
                    }, {
                        lightness: 20
                    }],
                }, {
                    featureType: "administrative",
                    elementType: "geometry.stroke",
                    stylers: [{
                        color: "#fefefe"
                    }, {
                        lightness: 17
                    }, {
                        weight: 1.2
                    }],
                }, {
                    featureType: "landscape",
                    elementType: "geometry",
                    stylers: [{
                        color: "#f4f4f4"
                    }, {
                        lightness: 20
                    }],
                }, {
                    featureType: "poi",
                    elementType: "geometry",
                    stylers: [{
                        color: "#f4f4f4"
                    }, {
                        lightness: 21
                    }],
                }, {
                    featureType: "poi.park",
                    elementType: "geometry",
                    stylers: [{
                        color: "#48c7ec"
                    }, {
                        lightness: 21
                    }],
                }, {
                    featureType: "road.highway",
                    elementType: "geometry.fill",
                    stylers: [{
                        color: "#ffffff"
                    }, {
                        lightness: 17
                    }],
                }, {
                    featureType: "road.highway",
                    elementType: "geometry.stroke",
                    stylers: [{
                        color: "#ffffff"
                    }, {
                        lightness: 29
                    }, {
                        weight: 0.2
                    }],
                }, {
                    featureType: "road.arterial",
                    elementType: "geometry",
                    stylers: [{
                        color: "#ffffff"
                    }, {
                        lightness: 18
                    }],
                }, {
                    featureType: "road.local",
                    elementType: "geometry",
                    stylers: [{
                        color: "#ffffff"
                    }, {
                        lightness: 16
                    }],
                }, {
                    featureType: "transit",
                    elementType: "geometry",
                    stylers: [{
                        color: "#48c7ec"
                    }, {
                        lightness: 19
                    }],
                }, {
                    featureType: "water",
                    elementType: "geometry",
                    stylers: [{
                        color: "#a3ccff"
                    }, {
                        lightness: 17
                    }],
                }, ],
            };
            var mapElement = document.getElementById("googleMap");
            var map = new google.maps.Map(mapElement, mapOptions);
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(41.96677, -71.186996),
                map: map,
                title: "Snazzy!",
            });
        }
    }

    function backToTopBtnAppear() {
        if ($("#toTop").length) {
            var windowpos = $(window).scrollTop(),
                backToTopBtn = $("#toTop");
            if (windowpos > 300) {
                backToTopBtn.fadeIn();
            } else {
                backToTopBtn.fadeOut();
            }
        }
    }

    function backToTop() {
        if ($("#toTop").length) {
            var backToTopBtn = $("#toTop");
            backToTopBtn.on("click", function () {
                $("html, body").animate({
                    scrollTop: 0
                }, 1000);
                return false;
            });
        }
    }
    $(window).on("load", function () {
        funFactCounting();
        backToTop();
        // new WOW().init();
        progressBar();
    });
    $(window).on("scroll", function () {
        backToTopBtnAppear();
        menuSticky();
    });
});

function loadSite() {
    document.querySelector('#preloader').style.opacity = 0;
    document.querySelector('#preloader').style.display = "none";
    document.querySelector('#preloader').style.visibilty = "hidden";
}